<!DOCTYPE html>
<html>
<head>
    <title>Script Manifest Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
    <script>
        function generateManifest() {
            const selectedVersion = document.getElementById('version').value;
            let serverVersion = "1.5.0-beta";
            let serverUiVersion = "1.2.0-beta";
            
            if (selectedVersion === "stable") {
                serverVersion = "1.4.0-beta";
                serverUiVersion = "1.2.0-beta";
            } else if (selectedVersion === "beta") {
                serverVersion = "1.5.0-beta";
                serverUiVersion = "1.2.0-beta";
            } else if (selectedVersion === "preview") {
                serverVersion = "1.6.0-beta";
                serverUiVersion = "1.2.0-beta";
            }

            const authorName = document.getElementById('author').value;
            const manifest = {
                "format_version": 2,
                "header": {
                    "name": document.getElementById('name').value,
                    "description": `${document.getElementById('description').value} - ${authorName}`,
                    "uuid": generateUUID(),
                    "min_engine_version": [1, 20, 0],
                    "version": [1, 0, 0]
                },
                "modules": [
                    {
                        "type": "script",
                        "language": "javascript",
                        "entry": "scripts/index.js",
                        "uuid": generateUUID(),
                        "version": [1, 0, 0]
                    },
                    {
                        "type": "data",
                        "uuid": generateUUID(),
                        "version": [1, 0, 0]
                    }
                ],
                "dependencies": [
                    {
                        "module_name": "@minecraft/server",
                        "version": serverVersion
                    },
                    {
                        "module_name": "@minecraft/server-ui",
                        "version": serverUiVersion
                    }
                ]
            };
            const manifestJsonString = JSON.stringify(manifest, null, 4);
            document.getElementById('output').textContent = manifestJsonString;
            return manifestJsonString;
        }

        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0,
                    v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }
        
        function download(filename, text) {
            var element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
            element.setAttribute('download', filename);

            element.style.display = 'none';
            document.body.appendChild(element);

            element.click();

            document.body.removeChild(element);
        }
        
        function downloadManifest() {
            const manifestJsonString = generateManifest();
            console.warn(manifestJsonString)
            download("manifest.json", manifestJsonString);
        }
    </script>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-8">
        <h1 class="text-2xl font-bold mb-4">Script Manifest Generator</h1>
        
        <label class="block mb-2" for="name">Name:</label>
        <input class="w-full p-2 border rounded mb-2" type="text" id="name">
        
        <label class="block mb-2" for="description">Description:</label>
        <input class="w-full p-2 border rounded mb-2" type="text" id="description">
        
        <label class="block mb-2" for="version">Version:</label>
        <select class="w-full p-2 border rounded mb-2" id="version">
            <option value="stable">Stable</option>
            <option value="beta">Beta</option>
            <option value="preview">Preview</option>
        </select>
        
        <label class="block mb-2" for="author">Author:</label>
        <input class="w-full p-2 border rounded mb-2" type="text" id="author">
        
        <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mt-4" onclick="downloadManifest()">Generate Manifest</button>
        
        <pre class="bg-gray-200 p-4 mt-4 rounded" id="output"></pre>
    </div>
</body>
</html>
